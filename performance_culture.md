# 性能文化

> 原文：[Performance Culture](http://joeduffyblog.com/2016/04/10/performance-culture/)

在这篇文章中，我将讨论“性能文化”。性能是软件工程的关键支柱之一，也是很难做得正确的事情，有时候甚至很难去识别。一位著名的法官曾经说过：“当我看到时，我就知道。”之前我已经单独详细地谈到过[性能](http://joeduffyblog.com/2010/09/06/the-premature-optimization-is-evil-myth/)和[文化](http://joeduffyblog.com/2013/02/17/software-leadership-series/)，但两者的交集才是有意思的地方。这方面做得好的团队能在一开始就将性能贯彻到团队操作的几乎所有方面，并且能够主动提供迷人的用户体验来赢得竞争。没有简单的一刀切的方法来实现一个良好的性能文化，然而的确有一些最好的实践你可以遵循来播种到你的团队中。那，Let's go！

## 介绍

那么，为什么重点关注性能呢？

有部分原因是我的背景。我曾经工作在系统、runtime、编译器等东西上，都是一些客户期望能够很快的东西。相对于之后来修补，在此类项目的一开始就将目标、度量和团队进度从一开始就结合起来容易得多。我也曾经在很多团队工作过，一些在这方面做的非常棒，一些做得很差，而大多数是处于两者之间。一个统一的真相是区分的因素一直都是文化。

也有部分原因是因为，不管是什么类型的软件，性能几乎总是比我们客户期望的糟。这是一个简单的物理定律：给定有限的时间，以及在大小、速度以及功能的妥协，不可能加快程序的所有方面。但我坚信，在一般的团队中，对发展严谨的性能文化的关注度会比较低。我曾经听到过很多次“性能对于我们不是最优先”这样的话，直到痛苦地中止之后才认识到没有性能，产品不可能成功。

还有部分原因是它对于所有在 DevDiv 的我们就是信仰，因为我们聚焦于 .NET core 的性能、ASP.NET 的可伸缩性、整合促进性能的特性到 C# 和库中、使 Visual Studio 更快等等。它特别是我的信仰，因为我曾经一直和自己在 [Midori](./README.md) 中的经历比较（给这篇帖子带来了最多的启发）。

## 诊断和治疗

你如何辨别你的性能文化是在正轨上呢？这里有一些迹象表示它们不是的：

* 对“产品在我的关键性能指标上的执行情况怎么样？”这样的问题很难回答。
* 性能经常退步，而团队成员不是不知道、不关心，就是反应得太慢。
* 指责是对性能问题的最常见响应之一（对人员、基础结构，或者两者都是）。
* 性能测试狂野地摆动，不能被信任，因而被团队中的大多数人忽略。
* 性能是某些人或者某个人才会关注的东西，而不是整个团队。
* 产品中的性能问题很常见，需要进行丑陋乱糟糟的处理（和/或不能被重现）。

这看起来好像是技术问题。然而，你可能会惊讶，其实它们主要是人的问题。

解决方案并不容易，特别是当你的文化杂草丛生时。一开始就不要挖坑，总比后面再爬出来容易。但第一条规则是，当你已经在坑里，立刻停止继续挖！文化的转型必须从上层开始 —— 管理层在性能中积极参与，提出问题，寻求洞察，要求严谨 —— 同时它也来自下层 —— 工程师积极寻求了解他们正在编写的代码的性能，严酷地对退步采取零容忍的立场，并不断自我批评，寻找积极的改善。

除了我发现的一些一旦你拥有它就对效果很有帮助的最佳实践之外，本文将介绍一些方法来确保这种文化。它们中很多看起来很显而易见，但请相信我，很少能见到这里的这些东西在实践中和谐地生效。但一旦它可以生效，哇！那将会是多么的不同！

*对开源软件的简短说明。我是从商业软件开发的角度来写本文的。因此，你会比较多地看到“管理人员”这词。许多同样的原则也在开源中起作用。所以，如果你喜欢，任何时候都可以将你看到的“管理人员”在脑中转变成“管理人员或项目提交者”。*

## 自此至终，文化随行

